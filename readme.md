
# Tokopedia Play (Backend Only)

The Tokopedia Play Backend API is a RESTful API server made as a midterm assignment for GIGIH 3.0 Fullstack Track. It provides various endpoints to manage video thumbnail lists, product lists, comments, and the ability to submit comments for videos.

## Database Structure

This system uses a NoSQL MongoDB database to store various data related to videos, products, and comments. all the data stored in one collection with productList and commentList stored as **embedded document** inside video document. the schematic is as follows:


- `_id`: ObjectId
- `title`: String
- `ImageThumbnailUrl`: String
- `videoUrl`: String
- `productList`: Array of objects containing:
  - `_id`: ObjectId
  - `name`: String
  - `price`: Number
  - `link`: String
- `commentList`: Object containing:
  - `_id`: ObjectId
  - `userName`: String
  - `comment`: String
  - `createdAt`: Date
  - `updatedAt`: Date
- `createdAt`: Date
- `updatedAt`: Date


#### Schema Explanation
The videos collection stores information about various videos available on the platform. Each document represents a single video and includes details such as the video title, URL link to the video's thumbnail image, URL link to the video's, an array of associated products (productList), a list of comments (commentList), and a timestamp.

- `_id`: The unique identifier for each video document, automatically generated by MongoDB.
- `title`: The title of the video.
- `urlImageThumbnail`: The URL link to the thumbnail image of the video.
- `videoUrl`: The URL link to the video.
- `productList`: An array of objects containing information about the products associated with the video. Each object includes the product's title, price, and link to the product page.
- `commentList`: An object containing details of the latest comment made on the video, including the user's name and the comment text.
- `createdAt`: The timestamp indicating when the document was created.
- `updatedAt`: The timestamp indicating when the document was last updated.

##### Array of objects productList:
Stores information about the products available for sale on the platform. Each obejct represents a single product and related to videos. it includes details such as the product title, price, and link to the product page.
- `_id`: The unique identifier for each product document, automatically generated by MongoDB.
- `title`: The title of the product.
- `price`: The price of the product.
- `link`: The URL link to the product page.

##### Array of objects commentList:
Stores user comments on videos. Each object represents a single comment and includes details such as the user's name, the comment text, and timestamps for creation and update.

- `_id`: The unique identifier for each comment document, automatically generated by MongoDB.
- `userName`: The name of the user who made the comment.
- `comment`: The text of the comment.
- `createdAt`: The timestamp indicating when the comment was created.
- `updatedAt`: The timestamp indicating when the comment was last updated.

## API Structure

This project implements an Express.js API server to build a Tokopedia Play clone. The API provides several endpoints to handle video thumbnail lists, product lists, comments, and the ability to submit comments for videos. below is the list of API request and response:

### GET /
Return all video thumbnail list in the system
* **URL Params**  
  None
* **Data Params**  
  None
* **Headers**  
  Content-Type: application/json  
* **Success Response:**  
* **Code:** 200  
  
  **Content:** 
  ```
  {
    "videoList": [
      {
        "_id": string,
        "ImageThumbnailUrl": String
      },
    ]
  }
  ``` 

* **Error Response:**  
* **Code:** 500  
  
  **Content:** 
  ```
  "Failed to get product list, Error Message :" + error.message
  ```

### GET /product/:id
Return all product list in the system based on video id
* **URL Params**  
  *Required:* `id=[integer]`
* **Data Params**  
  None
* **Headers**  
  Content-Type: application/json  
* **Success Response:**  
* **Code:** 200  
  
  **Content:** 
  ```
  [{
    "productList": [
      {
        "_id": string,
        "name": string,
        "price": integer,
        "link": string
      },
    ]
  }]
  ``` 

* **Error Response:**  
* **Code:** 500  
  
  **Content:** 
  ```
  "Failed to get product list, Error Message :" + error.message
  ```

### GET /comment/:id
Return all comment list in the system based on video id
* **URL Params**  
  *Required:* `id=[integer]`
* **Data Params**  
  None
* **Headers**  
  Content-Type: application/json  
* **Success Response:**  
* **Code:** 200  
  
  **Content:** 
  ```
  [{
    "commentList": [
      {
        "userName": string,
        "comment": string,
        "createdAt": ISODate,
        "updatedAt": ISODate
      },
    ]
  }]
  ``` 

* **Error Response:**  
* **Code:** 500  
  
  **Content:** 
  ```
  "Failed to get comment list, Error Message :" + error.message
  ```

### POST /comment/:id
Submit comment to specific video based on video id
* **URL Params**  
  *Required:* `id=[integer]`
* **Data Params**  
  ```
  {
    "userName": string,
    "comment": string
  }
  ```
* **Headers**  
  Content-Type: application/json  
* **Success Response:**  
* **Code:** 201 
  
  **Content:** 
  ```
  "Comment Successfully Added"
  ``` 

* **Error Response:**  
* **Code:** 400

  **Content:** 
  ```
  "Failed to add comment, Error Message :" + error.message
  ```

## How to run in local
To run the Tokopedia Play Backend API server locally, follow these steps:

1\. Clone this repository to your local machine.
2\. Install the required dependencies using `npm install`.
3\. Start the server using `npm start`.
4\. The API server will start running at http://localhost:3000.
5\. Use the specified endpoints to interact with the API and retrieve video thumbnail lists, product lists, and comments.